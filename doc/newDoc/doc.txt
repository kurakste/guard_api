У приложения три компонента. Сервер(srv) мобильное приложение (app) и 
контрольная панель операторов. Взаимодействие происходит по протоколу 
webSoсket (библиотека socket.io). 

Формат сообщения который передается по сокетам: 
{
  payload: Object,
}

======================== контрольная панель ====================================
При запуске контрольная панель создает соединение по сокету с сервером.

Контрольная панель проходит аутентификацию на сервере. ( см. ниже)
Параметром подключения к сокету является token, это строка - зашифрованный объект 
пользователя. Время жизни сокета - 96 часов. После этого пользователь должен 
получить токен. Если приложение получает в событии srvError код ошибки от 0-10 - 
это ошибки связанные с авторизацией. При возникновении таких ошибок приложение 
делает редирект на страницу регистрации. После чего пользователь должен получить 
новый токен.

Для не авторизированных пользователей сервер готов принять два сообщения: 

Общение контрольная панель-сервер:

Исходящие сообщения от контрольной панели к серверу:
  cpRegisterNewCpUser:
    Запрос на регистрацию нового пользователя.
    payload: объект пользователя включая пароль.
    комментарий: получит либо ответ (см. srvNewUserWasCreated) либо ошибку в 
    обработчик ошибок
  
  cpSignIn:
    Запрос на авторизацию.
    payload: объект с двумя обязательными полями email, password 
    комментарий: получит либо ответ (см. srvLoginOk)либо ошибку в 
    обработчик ошибок
  
  cpPickedUpAlarm
    Оператор взял тревогу в обработку:
    payload:  объект тревога 

  cpAlarmGbrSent: 
    Оператор отправил группу
    payload:объект тревога 

  cpAlarmClosed:
    Оператор закрыл тревогу
    payload: объект тревога

  cpAlarmDecline
     Оператор отклонил тревогу
     payload: объект тревоги 

Входящие сообщения на контрольную панель от сервера:
  srvErrMessage
    Ошибки от сервера.
    payload: { message, code }
    от 0-10 ошибки авторизации, 
    1 - все ошибки при SignUp кроме проверки email на уникальность
    7 - пользователь с таким email существует(при регистрации). 
    8 - пользователь не подтвержден админом.
    3 - auth token absent ....
    4 - auth token incorrect or expired.
    6 - прочие ошибки при SignIn
  srvNewUserWasCreated:
    ответ на запрос создания нового пользователя
    payload: {
      result: true
    }
    Если нет ошибки можно сказать пользователю что учетная запись создана,
    но должна быть подтверждена администратором. Перенаправить на страницу 
    авторизации.

  srvLoginOk
    ответ на успешный запрос авторизации
    payload: {
      token:'jfdsqlksjdflskdf',
      user: объект пользователя. 
    }
    нужно сохранить токен и передавать со всеми остальными запросами
    
  srvUpdateUserList: 
    На сервере обновился лист подключенных пользователей контрольной панели. 
    Будет отправляться при подключении нового пользователя к панели, что бы
    получить полный список текущих пользователей.
    payload: [ id1, id2, id3 ...]

  srvNewUserConnected:
    на сервер подключился новый пользователь контрольной панели
    payload: id
  
  srvNewUserDisconnected:
    от сервера отключился пользователь контрольной панели
    payload: id

  srvUpdateAlarmListAll:
    На сервере обновился общий лист тревог.
    Payload: массив объектов тревог
    комментарий: как правило будет случаться в момент подключения к серверу. Нужно 
    обновить список тревог в интерфейсе. 
  
  srvCreateNewAlarm: 
    создана новая тревога от пользователя
    payload: объект тревога
    комментарий: пользователь создал новую тревогу
 
  srvDeleteAlarm:
    Тревога закрыта оператором
    payload: объект тревога
    комментарий: будет возникать когда оператор отклонит или завершит тревогу 
  
  srvUpdateAlarm:
    Тревога изменена оператором
    payload: объект тревога
    комментарий: будет возникать когда тревога обновлена сервером 


==============================================================================


  
  Исходящие сообщения от приложения на сервер:

    appNewAlarm:
      Пользователь создал тревогу.
      payload: объект тревоги
    
    appNewPointInTrack:
      В терек тревоги добавлена новая точка
      payload: {
        aid: 23
        point: [23.2223, 33.3333]
      }

